"use strict";(self.webpackChunkinmobitas_client=self.webpackChunkinmobitas_client||[]).push([[602],{991:function(e,n,t){t(7313);var r=t(7908),i=t(6417);n.Z=function(e){var n=e.icon,t=e.onClick,o=e.color;return(0,i.jsx)(r.Z,{flex:1,display:"flex",justifyContent:"center",alignItems:"center",borderLeft:"1px solid #EDEFF5",onClick:t,height:"100%",width:"100%",children:(0,i.jsx)(n,{color:o})})}},8710:function(e,n,t){t.d(n,{b:function(){return r}});var r=function(e,n){return Math.floor(e/n)}},1380:function(e,n,t){t(7313);var r=t(7908),i=t(8202),o=t(7422),a=t(5818),c=t(6417);n.Z=function(e){var n=e.fieldErrorMsg;return n?(0,c.jsxs)(r.Z,{marginTop:(0,i.Z)(1),display:"flex",alignItems:"center","data-testid":"error-message-container",children:[(0,c.jsx)(o.o,{color:"danger",marginRight:(0,i.Z)(1),size:(0,i.Z)(3)}),(0,c.jsx)(a.Z,{size:300,width:"100%",children:n})]}):null}},8408:function(e,n){n.Z=function(){return"ontouchstart"in document.documentElement?"touchscreen":"desktop"}},2497:function(e,n,t){var r=t(9439),i=t(7313);n.Z=function(e,n){var t,o=(0,i.useState)(),a=(0,r.Z)(o,2),c=a[0],s=a[1],u=function(){if(null!==e&&void 0!==e&&e.current){var t,r=0;r=window.innerHeight-(null===(t=e.current)||void 0===t?void 0:t.offsetTop)-1,n&&(r-=n),s(r-70)}};return(0,i.useEffect)((function(){return u(),window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}}),[]),(0,i.useEffect)((function(){u()}),[null===(t=e.current)||void 0===t?void 0:t.offsetTop]),c}},2992:function(e,n,t){t.r(n),t.d(n,{default:function(){return Me}});var r=t(1413),i=t(5861),o=t(9439),a=t(7757),c=t.n(a),s=t(7313),u=t(7908),l=t(618),d=t(7777),f=t(9652),Z=t(6267),h=t(5611),v=t(6020),p=t(3202),x=t(2649),g=t(9502),m=t(5818),j=t(1837),w=t(3819),E=t(3320),C=t(4729),y=t(7910),D=t(9600),k=t(4836),b=t(1986),M=t(4511),S=t(2165),I=t(7011),T=t(6352),P=t(5110),z=function(e,n){(0,s.useEffect)((function(){var t=function(t){var r;console.log("clicked!"),!t.target.isConnected||null!==e&&void 0!==e&&null!==(r=e.current)&&void 0!==r&&r.contains(t.target)||n()};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}}),[n,e])},H=t(2497),R=function(e){var n=(0,s.useRef)();return(0,s.useEffect)((function(){n.current=e}),[e]),n.current},F=t(8408),L=t(5997),N=t(2682),Q=t(9873),V=t(4366),A=t(6417),Y=function(e){var n=e.views,t=e.setCurrentView,r=e.setCurrentDate,i=(0,M.$)(["agenda"]).t,a=n.map((function(e){return{label:"".concat(i(e)),value:e}}));var c=(0,s.useState)("month"),u=(0,o.Z)(c,2),l=u[0],d=u[1];return(0,A.jsx)(V.Z,{options:a,value:l,onChange:function(e){"today"===e?(d("day"),t("day"),r(new Date)):void 0!==e.charAt&&(d(e),t(e))}})},$=t(8756),_=t(8225),X=t(9964),B=t(8789),G=t(6874),O=t(9254),U=t(5160),W=t(8392),q=t(5825),J=t(9004),K=t(9376),ee=t(4605),ne=function(e){var n=e.currentDate,t=e.currentView,r=e.setCurrentDate,i=(0,M.$)(["agenda"]),a=(i.t,i.i18n.language.includes("es")?I.Z:S.Z),c=(0,s.useState)(),l=(0,o.Z)(c,2),d=l[0],f=l[1],Z=(0,K.Z)(n),h=(0,ee.Z)(n);(0,s.useEffect)((function(){(0,B.Z)(n,Z)&&(0,B.Z)(n,h)?f(!1):f(!0)}),[n]);var v=function(e){"month"===t&&("prev"===e&&r((0,G.Z)(n,1)),"next"===e&&r((0,O.Z)(n,1))),"week"===t&&("prev"===e&&r((0,U.Z)(n,1)),"next"===e&&r((0,W.Z)(n,1))),"day"===t&&("prev"===e&&r((0,q.Z)(n,1)),"next"===e&&r((0,J.Z)(n,1)))};return(0,A.jsxs)(u.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:20,children:[(0,A.jsx)($.w,{size:25,cursor:"pointer",color:"#3a3e58",onClick:function(){return v("prev")}}),(0,A.jsxs)(u.Z,{children:[(0,A.jsx)(_.Z,{is:"h1",size:600,textAlign:"center",color:"#3a3e58",children:"month"===t?(0,Q.Q6)((0,D.Z)(n,"MMMM",{locale:a})):"week"===t?"".concat((0,Q.Q6)((0,D.Z)((0,K.Z)(n),"EEEE",{locale:a}))," ").concat((0,D.Z)((0,K.Z)(n),"d")," - ").concat((0,Q.Q6)((0,D.Z)((0,ee.Z)(n),"EEEE",{locale:a}))," ").concat((0,D.Z)((0,ee.Z)(n),"d")):"day"===t?"".concat((0,Q.Q6)((0,D.Z)(n,"EEEE",{locale:a}))," ").concat((0,D.Z)(n,"d",{locale:a})):null}),(0,A.jsx)(_.Z,{is:"h2",textAlign:"center",size:200,children:"(".concat("week"===t?d?(0,D.Z)(Z,"MMMM ",{locale:a})+" - "+(0,D.Z)(h,"MMMM",{locale:a})+" / ":(0,D.Z)(n,"MMMM",{locale:a})+" / ":"day"===t?(0,Q.Q6)((0,D.Z)(n,"MMMM",{locale:a}))+" / ":"").concat((0,C.Z)(n),")")})]}),(0,A.jsx)(X.X,{size:25,cursor:"pointer",color:"#3a3e58",onClick:function(){return v("next")}})]})},te=t(3433),re=t(5987),ie=t(5622),oe=t(8307),ae=t(2520),ce=t(3041),se=t(3394),ue=t(3348),le=t(3201),de=function(e){var n=e.value,t=e.onChange,r=(0,s.useState)(!1),i=(0,o.Z)(r,2),a=i[0],c=i[1],d=(0,s.useRef)(null);return console.log(d),(0,A.jsxs)(se._,{dateAdapter:le.Z,children:[(0,A.jsxs)(u.Z,{display:"flex",children:[(0,A.jsx)(oe.Z,{disabled:!0,width:"100%",marginRight:10,value:n&&(0,D.Z)(n,"p"),onClick:function(){return c(!0)}}),(0,A.jsx)(l.Z,{type:"button",icon:ce.w,onClick:function(){return c(!a)}})]}),a&&(0,A.jsx)(u.Z,{position:"absolute",zIndex:6,backgroundColor:"white",elevation:3,children:(0,A.jsx)(ue.I,{ref:d,date:n||null,ampmInClock:!0,ampm:!0,showViewSwitcher:!0,onChange:function(e,n){t(e),"finish"===n&&c(!1)}})})]})},fe=t(8202),Ze=t(5032),he=t(1406),ve=(t(6041),function(e){var n,t=e.value,r=e.onChange,i=(0,s.useState)(!1),a=(0,o.Z)(i,2),c=a[0],d=a[1],f=null!==(n=(0,M.$)().i18n.language)&&void 0!==n&&n.includes("es")?I.Z:S.Z;return(0,A.jsxs)(u.Z,{position:"relative",width:"100%",children:[(0,A.jsxs)(u.Z,{display:"flex",children:[(0,A.jsx)(oe.Z,{disabled:!0,width:"100%",marginRight:(0,fe.Z)(3),value:t&&(0,D.Z)(t,"yyyy-MM-dd"),onClick:function(){return d(!0)}}),(0,A.jsx)(l.Z,{type:"button",icon:Ze.Q,onClick:function(){return d(!c)}})]}),c&&(0,A.jsx)(u.Z,{position:"absolute",zIndex:5,right:0,elevation:2,backgroundColor:"white",children:(0,A.jsx)(he._W,{mode:"single",locale:f,selected:t,onSelect:function(e){!function(e){if(e){var n=new Date(e);t&&(n.setHours(t.getHours()),n.setMinutes(t.getMinutes())),r(n),d(!1)}}(e)}})})]})}),pe=t(3015),xe=t(7781),ge=t(1380),me=["eventId"],je=function(e){var n=e.currentEvent,t=e.setCurrentEvent,a=e.date,l=e.setEvents,d=e.setDisplayEventForm,f=(0,T.v9)(N.vn),Z=(0,s.useState)({}),h=(0,o.Z)(Z,2),v=h[0],p=h[1],x=(0,s.useState)(),g=(0,o.Z)(x,2),j=g[0],w=g[1],E=(0,s.useState)(!1),C=(0,o.Z)(E,2),y=C[0],D=C[1],k=(0,s.useRef)(null);z(k,(function(){d(!1),t(null)}));var b=(0,M.$)(["agenda","ui"]).t,S=(0,pe.iv)({"& > div":{"margin-top":"10px"}}).toString();(0,s.useEffect)((function(){p({startDate:new Date(a)})}),[]);var I=function(){var e=(0,i.Z)(c().mark((function e(i){var o,a,s,u,Z;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(i),i.eventId,o=(0,re.Z)(i,me),a=o,e.prev=3,!n){e.next=10;break}return e.next=7,L.Z.put("/events/".concat(f,"/").concat(n.eventId),a);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,L.Z.post("/events/".concat(f),i);case 12:e.t0=e.sent;case 13:s=e.t0,u=s.data,console.log(u),Z=(0,r.Z)((0,r.Z)({},u),{},{startDate:new Date(u.startDate),endDate:new Date(u.endDate||u.startDate)}),l((function(e){var r=null;if(n){t(null);var i=e.filter((function(e){return e.eventId!==Z.eventId}));r=[].concat((0,te.Z)(i),[Z])}else r=[].concat((0,te.Z)(e),[Z]);return r.sort((function(e,n){return(0,xe.Z)(e.startDate,n.startDate)})),r})),d(!1),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(3),w(e.t1);case 24:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(n){return e.apply(this,arguments)}}();return(0,A.jsx)(u.Z,{width:350,padding:20,ref:k,children:(0,A.jsx)(ie.l0,{onSubmit:I,initialValues:n||v,render:function(e){var t=e.handleSubmit,i=e.values,o=e.modified;return console.log("form values: ",i),(0,A.jsxs)("form",{onSubmit:t,className:S,children:[(0,A.jsx)(_.Z,{size:800,children:b(n?"editEvent":"newEvent")}),(0,A.jsxs)(u.Z,{marginTop:10,children:[(0,A.jsx)(m.Z,{children:b("eventTitle")+" *"}),(0,A.jsx)(ie.gN,{name:"title",component:"input",children:function(e){return(0,A.jsx)(oe.Z,(0,r.Z)((0,r.Z)({},e.input),{},{placeholder:b("describeEvent"),width:"100%"}))}}),(0,A.jsx)(ge.Z,{fieldErrorMsg:(0,Q.Y)(j,"title")})]}),(0,A.jsxs)(u.Z,{children:[(0,A.jsx)(m.Z,{display:"block",children:b("date")}),(0,A.jsx)(ie.gN,{name:"startDate",component:"input",children:function(e){return(0,A.jsx)(ve,{value:e.input.value,onChange:e.input.onChange})}}),(0,A.jsx)(ge.Z,{fieldErrorMsg:(0,Q.Y)(j,"startDate")})]}),(0,A.jsxs)(u.Z,{children:[(0,A.jsx)(m.Z,{display:"block",children:b(y?"startTime":"time")}),(0,A.jsx)(ie.gN,{name:"startDate",component:"input",children:function(e){return(0,A.jsx)(de,{value:e.input.value,onChange:e.input.onChange})}}),(0,A.jsx)(ge.Z,{fieldErrorMsg:(0,Q.Y)(j,"startDate")})]}),y&&(0,A.jsxs)(u.Z,{children:[(0,A.jsx)(m.Z,{display:"block",children:b("endTime")}),(0,A.jsx)(ie.gN,{name:"endDate",component:"input",children:function(e){return(0,A.jsx)(de,{value:null!==o&&void 0!==o&&o.endDate?e.input.value:i.startDate,onChange:e.input.onChange})}}),(0,A.jsx)(ge.Z,{fieldErrorMsg:(0,Q.Y)(j,"endDate")})]}),(0,A.jsx)(ae.ZP,{width:"100%",marginTop:15,intent:y?"danger":"success",type:"button",onClick:function(){return D(!y)},children:b(y?"removeEndTime":"addEndTime")}),(0,A.jsx)(u.Z,{display:"flex",marginTop:15,children:(0,A.jsx)(ae.ZP,{width:"100%",type:"submit",appearance:"primary",children:b(n?"editEvent":"addNewEvent")})})]})}})})},we=t(5297),Ee=["displayFn","children"],Ce=function(e){e.displayFn;var n=e.children,t=(0,re.Z)(e,Ee);return(0,A.jsxs)(u.Z,{position:"fixed",top:0,left:0,zIndex:100,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh",children:[(0,A.jsx)(u.Z,{cursor:"pointer",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(67, 90, 111, 0.7)",zIndex:101}),(0,A.jsx)(we.Z,(0,r.Z)((0,r.Z)({zIndex:102,elevation:4,backgroundColor:"white",marginTop:-100},t),{},{children:n}))]})},ye=t(991),De=function(){var e=(0,s.useState)(),n=(0,o.Z)(e,2),t=n[0],r=n[1];return(0,s.useEffect)((function(){r(window.screen.orientation.type)}),[window.screen.orientation.type]),t},ke=t(8710),be=["month","week","day","today"],Me=function(){var e=new Date,n=(0,T.v9)(N.vn),t=(0,s.useState)(new Date),a=(0,o.Z)(t,2),V=a[0],$=a[1],_=R(V),X=(0,s.useState)("month"),B=(0,o.Z)(X,2),G=B[0],O=B[1],U=(0,s.useState)([]),W=(0,o.Z)(U,2),q=W[0],J=W[1],K=(0,s.useState)(null),ee=(0,o.Z)(K,2),te=ee[0],re=ee[1],ie=(0,s.useState)(null),oe=(0,o.Z)(ie,2),ae=oe[0],ce=oe[1],se=(0,s.useState)([]),ue=(0,o.Z)(se,2),le=ue[0],de=ue[1],fe=(0,s.useState)(!1),Ze=(0,o.Z)(fe,2),he=Ze[0],ve=Ze[1],pe=(0,s.useState)(!1),xe=(0,o.Z)(pe,2),ge=xe[0],me=xe[1],we=(0,s.useRef)(null),Ee=(0,H.Z)(we),Me=(0,s.useRef)(null);z(Me,(function(){return ce(null)}));var Se=(0,M.$)(["agenda"]),Ie=Se.t,Te=Se.i18n.language.includes("es")?I.Z:S.Z,Pe=De(),ze=(0,F.Z)(),He=(0,s.useState)(),Re=(0,o.Z)(He,2),Fe=Re[0],Le=Re[1],Ne=(0,s.useCallback)((0,i.Z)(c().mark((function e(){var t,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.Z)(V),i=(0,y.Z)(V),e.next=4,L.Z.get("/events/".concat(n,"/").concat(i+1,"/").concat(t));case 4:o=e.sent,a=o.data.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{startDate:new Date(e.startDate)},e.endDate?{endDate:new Date(e.endDate)}:{})})),J(a);case 7:case"end":return e.stop()}}),e)}))),[V,n]),Qe=function(){var e=(0,i.Z)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Z.delete("/events/".concat(n,"/").concat(t));case 2:r=q.filter((function(e){return e.eventId!==t})),J(r),ce(null);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ve=(0,s.useMemo)((function(){return le.map((function(e){var n=e.startDate,t=e.endDate,r=e.title,i=t&&!((0,D.Z)(e.startDate,"HH:mm")===(0,D.Z)(t,"HH:mm"));return{date:"".concat((0,Q.Q6)((0,D.Z)(n,"EEE",{locale:Te}))," ").concat(n.getDate()),time:(0,D.Z)(e.startDate,"h:mm a")+(i?" - "+(0,D.Z)(t,"h:mm a"):""),event:r,options:"",eventId:e.eventId}}))}),[le]),Ae=(0,s.useMemo)((function(){return[{Header:Ie("date"),accessor:"date"},{Header:Ie("time"),accessor:"time"},{Header:Ie("event"),accessor:"event"},{Header:"",accessor:"options"}]}),[]),Ye=(0,P.useTable)({columns:Ae,data:Ve,initialState:{pageIndex:0}},P.usePagination),$e=Ye.getTableProps,_e=Ye.getTableBodyProps,Xe=Ye.headerGroups,Be=Ye.prepareRow,Ge=Ye.page,Oe=Ye.pageCount,Ue=Ye.state,We=Ye.setPageSize,qe=Ye.previousPage,Je=Ye.nextPage,Ke=Ye.gotoPage,en=function(e){return 0===e?1.2:1===e?1.7:2===e?4.6:0};(0,s.useEffect)((function(){console.log(Pe)}),[Pe]),(0,s.useEffect)((function(){_&&(0,y.Z)(V)!==(0,y.Z)(_)&&Ne()}),[V,_,Ne]),(0,s.useEffect)((function(){Ne()}),[]),(0,s.useEffect)((function(){if(Ee){var e=(0,ke.b)(Ee,50);e>0&&We(e)}}),[Ee]),(0,s.useEffect)((function(){if("day"===G){var e=q.filter((function(e){return(0,k.Z)(e.startDate)===(0,k.Z)(V)}));ge||(e=nn(e)),de(e)}if("week"===G){var n=q.filter((function(e){return(0,b.Z)(e.startDate)===(0,b.Z)(V)}));ge||(n=nn(n)),de(n)}if("month"===G){var t=q;ge||(t=nn(t)),de(t)}}),[G,q,ge,V]);var nn=function(n){return n.filter((function(n){return n.startDate>e}))};return(0,A.jsxs)(u.Z,{children:[(0,A.jsxs)(u.Z,{paddingX:20,flex:1,children:[(0,A.jsx)(ne,{currentDate:V,currentView:G,setCurrentDate:$}),(0,A.jsxs)(u.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:20,children:[(0,A.jsx)(Y,{views:be,setCurrentView:O,setCurrentDate:$}),(0,A.jsx)(u.Z,{children:(0,A.jsx)(l.Z,{icon:d.p,onClick:function(){return ve(!0)}})})]}),(0,A.jsx)(f.Z,{width:170,marginTop:15,label:Ie("showPast"),onChange:function(){return me(!ge)},checked:ge,userSelect:"none"})]}),(0,A.jsxs)(Z.Z,(0,r.Z)((0,r.Z)({flex:1},$e()),{},{children:[(0,A.jsx)(h.Z,{display:"flex",userSelect:"none",children:Xe.map((function(e){return e.headers.map((function(e,n){return(0,A.jsx)(v.Z,(0,r.Z)((0,r.Z)({flex:en(n)},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}),(0,A.jsx)(p.Z,(0,r.Z)((0,r.Z)({ref:we,height:Ee,overflow:"scroll"},_e()),{},{children:Ge.map((function(e,n){return Be(e),(0,A.jsx)(x.Z,(0,r.Z)((0,r.Z)({isHighlighted:ae===n,height:50,color:"#3a3e58",position:"relative",onMouseOver:"desktop"===ze?function(){return ce(n)}:void 0,onMouseLeave:"desktop"===ze?function(){return ce(null)}:void 0,onTouchStart:"touchscreen"===ze?function(){Le(setTimeout((function(){return ce(n)}),500))}:void 0,onTouchEnd:"touchscreen"===ze?function(){clearTimeout(Fe)}:void 0,onTouchMove:"touchscreen"===ze?function(){clearTimeout(Fe)}:void 0},e.getRowProps()),{},{children:e.cells.map((function(e,t){return 3!==t?(0,A.jsx)(g.Z,(0,r.Z)((0,r.Z)({flex:en(t)},e.getCellProps()),{},{children:(0,A.jsx)(m.Z,{userSelect:"none",children:e.render("Cell")})})):(0,A.jsxs)(u.Z,{ref:Me,position:"absolute",display:ae===n?"flex":"none",width:100,height:49,right:0,backgroundColor:"#F9FAFC",children:[(0,A.jsx)(ye.Z,{icon:j.d,onClick:function(){var e=Ge[n].original.eventId;re(q.find((function(n){return n.eventId===e}))),ve(!0),ce(null)}}),(0,A.jsx)(ye.Z,{icon:w.a,color:"danger",onClick:function(){var e=Ge[n].original.eventId;Qe(q.find((function(n){return n.eventId===e})).eventId)}})]})}))}))}))}))]})),(0,A.jsx)(u.Z,{width:"100%",display:"flex",justifyContent:"center",children:(0,A.jsx)(E.Z,{margin:"auto",page:Ue.pageIndex+1,totalPages:Oe,onNextPage:Je,onPreviousPage:qe,onPageChange:function(e){return Ke(e-1)}})}),he&&(0,A.jsx)(Ce,{displayFn:ve,children:(0,A.jsx)(je,{date:V,setEvents:J,setDisplayEventForm:ve,currentEvent:te,setCurrentEvent:re})})]})}},5997:function(e,n,t){t.d(n,{Y:function(){return c}});var r=t(1881),i=t.n(r),o=t(460),a=t(8121),c={withCredentials:!0,baseURL:"https://inmobitas.herokuapp.com/"},s=i().create(c);s.interceptors.response.use((function(e){return e}),(function(e){return e.response.data.authorizationError&&o.h.dispatch((0,a.P_)()),Promise.reject(e)})),n.Z=s}}]);